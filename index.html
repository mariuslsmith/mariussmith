<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Marius Smith - Pixel World</title>
    <meta name="description" content="Interactive pixel art portfolio for Marius Smith. Navigate the pixel world to explore my work.">
    <style>
        * {
            box-sizing: border-box;
        }
        
        body {
            margin: 0;
            padding: 0;
            background: #0a0a0a;
            color: #fff;
            font-family: 'Courier New', monospace;
            overflow: hidden;
            width: 100vw;
            height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        #canvas-container {
            position: relative;
            display: inline-block;
        }
        
        #canvas {
            border: 4px solid #444;
            image-rendering: pixelated;
            image-rendering: -moz-crisp-edges;
            image-rendering: crisp-edges;
            cursor: crosshair;
            box-shadow: 0 0 40px rgba(0, 0, 0, 0.8);
            max-width: 95vw;
            max-height: 95vh;
            transition: filter 0.3s ease;
        }

        #canvas.blurred {
            filter: blur(8px);
        }
        
        #status {
            position: absolute;
            bottom: 20px;
            left: 20px;
            right: 20px;
            font-size: 12px;
            color: #999;
            background: rgba(0, 0, 0, 0.9);
            padding: 12px 20px;
            border-radius: 4px;
            z-index: 10;
            line-height: 1.6;
            border: 1px solid #333;
        }
        
        #status strong {
            color: #fff;
        }

        /* Modal Overlay */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 100;
            animation: fadeIn 0.3s ease;
        }

        .modal-overlay.active {
            display: flex;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes slideUp {
            from { 
                transform: translateY(30px);
                opacity: 0;
            }
            to { 
                transform: translateY(0);
                opacity: 1;
            }
        }

        .modal-content {
            background: #0a0a0a;
            border: 2px solid #333;
            max-width: 700px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
            padding: 50px;
            position: relative;
            animation: slideUp 0.4s ease;
            font-family: 'Courier New', monospace;
        }

        .modal-close {
            position: absolute;
            top: 20px;
            right: 20px;
            background: transparent;
            border: none;
            color: #666;
            cursor: pointer;
            font-size: 24px;
            transition: color 0.2s ease;
            font-family: 'Courier New', monospace;
        }

        .modal-close:hover {
            color: #fff;
        }

        .modal-content h1 {
            margin: 0 0 30px 0;
            font-size: 24px;
            font-weight: normal;
            color: #fff;
            letter-spacing: 2px;
            text-transform: uppercase;
        }

        .modal-content h2 {
            margin: 40px 0 20px 0;
            font-size: 16px;
            font-weight: normal;
            color: #ccc;
            letter-spacing: 1px;
            text-transform: uppercase;
        }

        .modal-content p {
            line-height: 1.8;
            color: #aaa;
            margin: 15px 0;
            font-size: 14px;
        }

        .soundcloud-embed {
            margin: 30px 0;
            padding: 0;
            background: #000;
        }

        .soundcloud-embed h3 {
            margin: 0 0 20px 0;
            font-size: 14px;
            font-weight: normal;
            color: #999;
            letter-spacing: 1px;
            text-transform: uppercase;
        }

        .soundcloud-embed iframe {
            border: 1px solid #222;
        }

        .work-in-progress {
            padding: 40px;
            text-align: center;
            color: #666;
            font-size: 14px;
            letter-spacing: 2px;
            border: 1px dashed #333;
            margin: 20px 0;
        }

        @media (max-width: 768px) {
            #status {
                font-size: 10px;
                bottom: 10px;
                left: 10px;
                right: 10px;
                padding: 10px 15px;
            }

            .modal-content {
                padding: 40px 25px;
            }

            .modal-content h1 {
                font-size: 20px;
            }
        }

        /* Custom scrollbar for modal */
        .modal-content::-webkit-scrollbar {
            width: 8px;
        }

        .modal-content::-webkit-scrollbar-track {
            background: #0a0a0a;
        }

        .modal-content::-webkit-scrollbar-thumb {
            background: #333;
        }

        .modal-content::-webkit-scrollbar-thumb:hover {
            background: #444;
        }
    </style>
</head>
<body>
    <div id="canvas-container">
        <canvas id="canvas" width="1024" height="768"></canvas>
    </div>
    
    <div id="status">
        <strong>Marius Smith</strong> | mariussmith.xyz | Navigate to houses to explore my work | Arrow keys or WASD to move | Enter to enter house | ESC to exit
    </div>

    <!-- Modal Overlays -->
    <div id="modal-about" class="modal-overlay">
        <div class="modal-content">
            <div class="modal-close" onclick="closeModal('about')">×</div>
            <h1>About</h1>
            <p>Optimistic techno-optimist. +10 years as operator at tech-finance frontiers. Investor. Occasional lectures. Currently Head of EigenCloud at Eigen Labs.</p>
        </div>
    </div>

    <div id="modal-works" class="modal-overlay">
        <div class="modal-content">
            <div class="modal-close" onclick="closeModal('works')">×</div>
            <h1>Works</h1>
            <div class="work-in-progress">
                WORK IN PROGRESS
            </div>
        </div>
    </div>

    <div id="modal-music" class="modal-overlay">
        <div class="modal-content">
            <div class="modal-close" onclick="closeModal('music')">×</div>
            <h1>Music</h1>
            
            <div class="soundcloud-embed">
                <h3>Weekly Pick #1</h3>
                <iframe width="100%" height="300" scrolling="no" frameborder="no" allow="autoplay" src="https://w.soundcloud.com/player/?url=https%3A//api.soundcloud.com/tracks/1550310835&color=%23666666&auto_play=false&hide_related=false&show_comments=false&show_user=true&show_reposts=false&show_teaser=true&visual=true"></iframe>
            </div>
        </div>
    </div>

    <script>
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d', { alpha: false });
        ctx.imageSmoothingEnabled = false;
        const TILESIZE = 32;

        let map = Array(24).fill().map(() => Array(32).fill(0));

        // Houses (fixing coordinates: map[y][x])
        map[10][6] = map[10][7] = map[11][6] = map[11][7] = 1; // About
        map[10][14] = map[10][15] = map[11][14] = map[11][15] = 2; // Works
        map[10][22] = map[10][23] = map[11][22] = map[11][23] = 3; // Music/Berghain

        let avatar = { x: 15, y: 14 };
        let animationFrame = 0;
        const houses = {
            1: 'about',
            2: 'works',
            3: 'music'
        };

        // Social icons as clickable areas - moved to bottom right, closer together
        const socialIcons = [
            { 
                x: 28, 
                y: 22, 
                type: 'twitter',
                url: 'https://x.com/mariuslsmith'
            },
            { 
                x: 30, 
                y: 22, 
                type: 'linkedin',
                url: 'https://www.linkedin.com/in/mariuslundingsmith/'
            }
        ];

        // 5x7 Pixel font
        const pixelFont = {
            'M': [1,1,0,0,1,1,1,1,0,1,1,0,1,0,1,1,0,0,0,1,1,0,0,0,1,1,0,0,0,1,1,0,0,0,1],
            'A': [0,1,1,1,0,1,0,0,0,1,1,0,0,0,1,1,1,1,1,1,1,0,0,0,1,1,0,0,0,1,1,0,0,0,1],
            'R': [1,1,1,1,0,1,0,0,0,1,1,1,1,1,0,1,0,1,0,0,1,0,0,1,0,1,0,0,0,1,1,0,0,0,1],
            'I': [1,1,1,1,1,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,1,1,1,1,1,0,0,0,0,0],
            'U': [1,0,0,0,1,1,0,0,0,1,1,0,0,0,1,1,0,0,0,1,1,0,0,0,1,0,1,1,1,0,0,0,0,0,0],
            'S': [0,1,1,1,1,1,0,0,0,0,0,1,1,1,0,0,0,0,0,1,0,0,0,0,1,1,1,1,1,0,0,0,0,0,0],
            'H': [1,0,0,0,1,1,0,0,0,1,1,1,1,1,1,1,0,0,0,1,1,0,0,0,1,1,0,0,0,1,1,0,0,0,1],
            'T': [1,1,1,1,1,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0],
            ' ': [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]
        };

        function drawPixelText(text, startX, startY, scale = 5) {
            ctx.fillStyle = '#fff';
            let x = startX;
            for (let char of text.toUpperCase()) {
                if (pixelFont[char]) {
                    for (let i = 0; i < 35; i++) {
                        const col = i % 5;
                        const row = Math.floor(i / 5);
                        if (pixelFont[char][i]) {
                            ctx.fillRect(x + col * scale, startY + row * scale, scale, scale);
                        }
                    }
                    x += 6 * scale;
                }
            }
        }

        // X (Twitter) icon - Classic X shape
        function drawTwitterIcon(x, y) {
            ctx.fillStyle = '#fff';
            const s = 3; // pixel size
            
            // Draw X pattern
            // Top-left to bottom-right diagonal
            for (let i = 0; i < 6; i++) {
                ctx.fillRect(x + i * s, y + i * s, s, s);
            }
            // Top-right to bottom-left diagonal
            for (let i = 0; i < 6; i++) {
                ctx.fillRect(x + (5 - i) * s, y + i * s, s, s);
            }
        }

        // LinkedIn icon - "in" text in a square
        function drawLinkedInIcon(x, y) {
            ctx.fillStyle = '#fff';
            const s = 2; // pixel size
            
            // Draw border square
            // Top border
            for (let i = 0; i < 12; i++) {
                ctx.fillRect(x + i * s, y, s, s);
            }
            // Bottom border
            for (let i = 0; i < 12; i++) {
                ctx.fillRect(x + i * s, y + 11 * s, s, s);
            }
            // Left border
            for (let i = 0; i < 12; i++) {
                ctx.fillRect(x, y + i * s, s, s);
            }
            // Right border
            for (let i = 0; i < 12; i++) {
                ctx.fillRect(x + 11 * s, y + i * s, s, s);
            }
            
            // Draw "i" (left letter)
            // Dot
            ctx.fillRect(x + 3 * s, y + 3 * s, s, s);
            // Vertical line
            for (let i = 5; i < 9; i++) {
                ctx.fillRect(x + 3 * s, y + i * s, s, s);
            }
            
            // Draw "n" (right letter)
            // Left vertical line
            for (let i = 5; i < 9; i++) {
                ctx.fillRect(x + 6 * s, y + i * s, s, s);
            }
            // Top horizontal
            ctx.fillRect(x + 7 * s, y + 5 * s, s, s);
            // Right vertical line
            for (let i = 6; i < 9; i++) {
                ctx.fillRect(x + 8 * s, y + i * s, s, s);
            }
        }

        function drawSocialIcons() {
            socialIcons.forEach(icon => {
                const x = icon.x * TILESIZE;
                const y = icon.y * TILESIZE;
                
                if (icon.type === 'twitter') {
                    drawTwitterIcon(x + 6, y + 6);
                } else if (icon.type === 'linkedin') {
                    drawLinkedInIcon(x + 4, y + 4);
                }
            });
        }

        // Animated robot avatar
        function drawRobot(x, y, frame) {
            const px = x * TILESIZE;
            const py = y * TILESIZE;
            
            // Robot body (silver/gray)
            ctx.fillStyle = '#c0c0c0';
            
            // Head
            ctx.fillRect(px + 10, py + 4, 12, 8);
            
            // Eyes (alternate between on/off)
            ctx.fillStyle = frame % 20 < 18 ? '#00ff00' : '#004400';
            ctx.fillRect(px + 12, py + 6, 3, 3);
            ctx.fillRect(px + 17, py + 6, 3, 3);
            
            // Antenna
            ctx.fillStyle = '#c0c0c0';
            ctx.fillRect(px + 15, py + 2, 2, 2);
            
            // Body
            ctx.fillStyle = '#a0a0a0';
            ctx.fillRect(px + 9, py + 12, 14, 10);
            
            // Chest panel
            ctx.fillStyle = '#333';
            ctx.fillRect(px + 13, py + 14, 6, 6);
            
            // Arms (animate when walking)
            ctx.fillStyle = '#c0c0c0';
            const armOffset = Math.floor(frame / 5) % 2;
            ctx.fillRect(px + 6, py + 14 + armOffset, 3, 6);
            ctx.fillRect(px + 23, py + 14 + (1 - armOffset), 3, 6);
            
            // Legs (animate when walking)
            const legOffset = Math.floor(frame / 5) % 2;
            ctx.fillRect(px + 11, py + 22, 4, 6 - legOffset);
            ctx.fillRect(px + 17, py + 22, 4, 6 - (1 - legOffset));
        }

        function drawWorld() {
            // Dark night sky background
            ctx.fillStyle = '#050510';
            ctx.fillRect(0, 0, 1024, 768);

            // Stars
            ctx.fillStyle = '#fff';
            for (let i = 0; i < 100; i++) {
                const x = (i * 97) % 1024;
                const y = (i * 73) % 400;
                const size = (i % 3) + 1;
                ctx.fillRect(x, y, size, size);
            }

            // Moon/Sun
            const moonX = 900;
            const moonY = 80;
            const moonR = 35;
            
            // Glow
            const glowGradient = ctx.createRadialGradient(moonX, moonY, 0, moonX, moonY, moonR * 2);
            glowGradient.addColorStop(0, 'rgba(255, 255, 136, 0.8)');
            glowGradient.addColorStop(0.4, 'rgba(255, 200, 100, 0.4)');
            glowGradient.addColorStop(1, 'rgba(255, 255, 0, 0)');
            ctx.fillStyle = glowGradient;
            ctx.beginPath();
            ctx.arc(moonX, moonY, moonR * 2, 0, Math.PI * 2);
            ctx.fill();
            
            // Moon body
            ctx.fillStyle = '#fffacd';
            ctx.beginPath();
            ctx.arc(moonX, moonY, moonR, 0, Math.PI * 2);
            ctx.fill();

            // Ground
            ctx.fillStyle = '#1a1a2e';
            ctx.fillRect(0, 12 * TILESIZE, 1024, 768);

            // Ground details - path/road
            ctx.fillStyle = '#252838';
            ctx.fillRect(0, 18 * TILESIZE, 1024, 4 * TILESIZE);
            
            // Road lines
            ctx.fillStyle = '#3a3f52';
            for (let i = 0; i < 32; i += 3) {
                ctx.fillRect(i * TILESIZE, 19.5 * TILESIZE, TILESIZE, 4);
            }

            // Grass patches
            ctx.fillStyle = '#16213e';
            for (let i = 0; i < 300; i++) {
                const x = (i * 113) % 1024;
                const y = 12 * TILESIZE + ((i * 79) % (6 * TILESIZE));
                ctx.fillRect(x, y, 2, 2);
            }

            // Small decorative trees/bushes
            for (let i = 1; i < 31; i += 6) {
                if (i !== 6 && i !== 7 && i !== 14 && i !== 15 && i !== 22 && i !== 23) {
                    // Bush
                    ctx.fillStyle = '#1a3a1a';
                    ctx.fillRect(i * TILESIZE + 4, 13 * TILESIZE, 24, 16);
                    ctx.fillRect(i * TILESIZE + 8, 13 * TILESIZE - 4, 16, 8);
                    
                    // Trunk
                    ctx.fillStyle = '#3d2817';
                    ctx.fillRect(i * TILESIZE + 12, 13 * TILESIZE + 12, 8, 8);
                }
            }

            // Flowers/plants
            for (let i = 0; i < 50; i++) {
                const x = (i * 157) % 1024;
                const y = 12 * TILESIZE + ((i * 97) % (6 * TILESIZE));
                ctx.fillStyle = i % 3 === 0 ? '#ff6b9d' : '#ffd700';
                ctx.fillRect(x, y, 3, 3);
            }

            // Title
            drawPixelText('MARIUS SMITH', 80, 80, 5);

            // Houses
            for (let y = 0; y < 24; y++) {
                for (let x = 0; x < 32; x++) {
                    const tileValue = map[y][x];
                    
                    if (tileValue === 1) { // About - white house
                        ctx.fillStyle = '#f0f0f0';
                        ctx.fillRect(x * TILESIZE, y * TILESIZE, TILESIZE, TILESIZE);
                        ctx.fillStyle = '#333';
                        ctx.fillRect(x * TILESIZE + 8, y * TILESIZE + 10, 16, 18);
                        ctx.fillStyle = '#8b4513';
                        ctx.fillRect(x * TILESIZE + 10, y * TILESIZE + 15, 12, 13);
                    } else if (tileValue === 2) { // Works - gray house
                        ctx.fillStyle = '#a0a0a0';
                        ctx.fillRect(x * TILESIZE, y * TILESIZE, TILESIZE, TILESIZE);
                        ctx.fillStyle = '#4169e1';
                        ctx.fillRect(x * TILESIZE + 6, y * TILESIZE + 8, 10, 10);
                        ctx.fillRect(x * TILESIZE + 16, y * TILESIZE + 8, 10, 10);
                        ctx.fillStyle = '#654321';
                        ctx.fillRect(x * TILESIZE + 11, y * TILESIZE + 20, 10, 12);
                    } else if (tileValue === 3) { // Berghain
                        // Brutalist concrete
                        ctx.fillStyle = '#2a2a2a';
                        ctx.fillRect(x * TILESIZE, y * TILESIZE, TILESIZE, TILESIZE);
                        
                        // Neon strips
                        const neonColors = ['#ff0066', '#00ffff', '#00ff00', '#ff00ff'];
                        for (let i = 0; i < 4; i++) {
                            ctx.fillStyle = neonColors[i];
                            ctx.fillRect(x * TILESIZE + 4 + i * 6, y * TILESIZE + 4, 3, 24);
                        }
                        
                        // Concrete details
                        ctx.fillStyle = '#3a3a3a';
                        ctx.fillRect(x * TILESIZE, y * TILESIZE, TILESIZE, 2);
                        ctx.fillRect(x * TILESIZE, y * TILESIZE + TILESIZE - 2, TILESIZE, 2);
                    }
                }
            }

            // Social media icons
            drawSocialIcons();

            // Labels
            ctx.fillStyle = '#fff';
            ctx.font = 'bold 12px Courier New';
            ctx.textAlign = 'center';
            ctx.fillText('ABOUT', 6.5 * TILESIZE, 9.5 * TILESIZE);
            ctx.fillText('WORKS', 14.5 * TILESIZE, 9.5 * TILESIZE);
            ctx.fillText('MUSIC', 22.5 * TILESIZE, 9.5 * TILESIZE);

            // Robot avatar
            drawRobot(avatar.x, avatar.y, animationFrame);
        }

        function openModal(modalId) {
            document.getElementById(`modal-${modalId}`).classList.add('active');
            document.getElementById('canvas').classList.add('blurred');
        }

        function closeModal(modalId) {
            document.getElementById(`modal-${modalId}`).classList.remove('active');
            document.getElementById('canvas').classList.remove('blurred');
        }

        function moveAvatar(dx, dy) {
            const newX = avatar.x + dx;
            const newY = avatar.y + dy;
            
            if (newX >= 0 && newX < 32 && newY >= 0 && newY < 24) {
                const houseId = map[newY][newX];
                if (houseId && houses[houseId]) {
                    openModal(houses[houseId]);
                    return;
                }
                
                if (map[newY][newX] === 0) {
                    avatar.x = newX;
                    avatar.y = newY;
                    animationFrame++;
                }
            }
            drawWorld();
        }

        // Animation loop for blinking eyes
        setInterval(() => {
            animationFrame++;
            drawWorld();
        }, 100);

        // Handle clicks on social icons
        canvas.addEventListener('click', (e) => {
            const rect = canvas.getBoundingClientRect();
            const scaleX = canvas.width / rect.width;
            const scaleY = canvas.height / rect.height;
            const x = (e.clientX - rect.left) * scaleX;
            const y = (e.clientY - rect.top) * scaleY;
            
            const tileX = Math.floor(x / TILESIZE);
            const tileY = Math.floor(y / TILESIZE);
            
            socialIcons.forEach(icon => {
                if (tileX === icon.x && tileY === icon.y) {
                    window.open(icon.url, '_blank');
                }
            });
        });

        document.addEventListener('keydown', e => {
            const key = e.key.toLowerCase();
            
            // Close modals with ESC
            if (key === 'escape') {
                closeModal('about');
                closeModal('works');
                closeModal('music');
                return;
            }
            
            // Prevent movement when modal is open
            if (document.querySelector('.modal-overlay.active')) {
                return;
            }
            
            if (['arrowup', 'arrowdown', 'arrowleft', 'arrowright', 'w', 'a', 's', 'd'].includes(key)) {
                e.preventDefault();
            }
            
            switch (key) {
                case 'w':
                case 'arrowup':
                    moveAvatar(0, -1);
                    break;
                case 's':
                case 'arrowdown':
                    moveAvatar(0, 1);
                    break;
                case 'a':
                case 'arrowleft':
                    moveAvatar(-1, 0);
                    break;
                case 'd':
                case 'arrowright':
                    moveAvatar(1, 0);
                    break;
                case 'enter':
                    const houseId = map[avatar.y][avatar.x];
                    if (houseId && houses[houseId]) {
                        openModal(houses[houseId]);
                    }
                    break;
            }
        });

        // Close modal when clicking outside
        document.querySelectorAll('.modal-overlay').forEach(overlay => {
            overlay.addEventListener('click', (e) => {
                if (e.target === overlay) {
                    const modalId = overlay.id.replace('modal-', '');
                    closeModal(modalId);
                }
            });
        });

        // Initial draw
        drawWorld();
    </script>
</body>
</html>
